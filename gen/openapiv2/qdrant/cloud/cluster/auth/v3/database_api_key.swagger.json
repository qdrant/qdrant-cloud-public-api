{
  "swagger": "2.0",
  "info": {
    "title": "qdrant/cloud/cluster/auth/v3/database_api_key.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "DatabaseApiKeyService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/cluster/auth/v3/accounts/{accountId}/database-api-keys": {
      "get": {
        "summary": "Fetch all database api keys in the account identified by the given ID.\nRequired permissions:\n- read:api_keys",
        "operationId": "DatabaseApiKeyService_ListDatabaseApiKeys",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/authv3ListDatabaseApiKeysResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "accountId",
            "description": "The identifier of the account (in Guid format).\nThis is a required field.",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "clusterId",
            "description": "The identifier of the cluster (in Guid format).\nThis is a required field.",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "DatabaseApiKeyService"
        ]
      }
    },
    "/api/cluster/auth/v3/accounts/{accountId}/database-api-keys/{databaseApiKeyId}": {
      "delete": {
        "summary": "Deletes a database api key in the account identified by the given ID.\nRequired permissions:\n- delete:api_keys",
        "operationId": "DatabaseApiKeyService_DeleteDatabaseApiKey",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/authv3DeleteDatabaseApiKeyResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "accountId",
            "description": "The identifier of the account (in Guid format).\nThis is a required field.",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "databaseApiKeyId",
            "description": "The identifier of the database api key (in Guid format).\nThis is a required field.",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "clusterId",
            "description": "The identifier for the cluster (in Guid format).\nThis cluster should be part of the provided account.\nThis is a required field.",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "DatabaseApiKeyService"
        ]
      }
    },
    "/api/cluster/auth/v3/accounts/{databaseApiKey.accountId}/database-api-keys": {
      "post": {
        "summary": "Creates a database api key in the account identified by the given ID.\nRequired permissions:\n- write:api_keys",
        "operationId": "DatabaseApiKeyService_CreateDatabaseApiKey",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/authv3CreateDatabaseApiKeyResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "databaseApiKey.accountId",
            "description": "The identifier of the account (in Guid format).\nThis is a required field.",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/authv3DatabaseApiKeyServiceCreateDatabaseApiKeyBody"
            }
          }
        ],
        "tags": [
          "DatabaseApiKeyService"
        ]
      }
    }
  },
  "definitions": {
    "authv3CreateDatabaseApiKeyResponse": {
      "type": "object",
      "properties": {
        "databaseApiKey": {
          "$ref": "#/definitions/authv3DatabaseApiKey",
          "description": "The actual database api key."
        }
      },
      "description": "CreateDatabaseApiKeyResponse is the response from the CreateDatabaseApiKey function."
    },
    "authv3DatabaseApiKey": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the database api key (in Guid format).\nThis is a read-only field and will be available after a database api key is created."
        },
        "accountId": {
          "type": "string",
          "description": "The identifier of the account (in Guid format).\nThis is a required field."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the database api key was created.\nThis is a read-only field and will be available after a database api key is created."
        },
        "clusterId": {
          "type": "string",
          "description": "The identifier of the cluster (in Guid format).\nThis is a required field."
        },
        "name": {
          "type": "string",
          "description": "Name of the database api key.\nThis is a required field.\nName can only contain letters, numbers, spaces, underscores and dashes."
        },
        "expirationTime": {
          "type": "string",
          "format": "date-time",
          "description": "The expiration time of the database api key. The key will be invalid after this time.\nThis field is optional, and if not provided, the key does not expire."
        },
        "accessRules": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v3AccessRule"
          },
          "description": "A list of rules to grant access to the Qdrant database or to specific\ncollections. If no access rules are provided, global access to the database\nwith manage permissions is assumed. The list can contain a maximum of 20\naccess rules."
        },
        "createdByEmail": {
          "type": "string",
          "description": "The email of the user who created the database api key.\nThis is a read-only field and will be available after a database api key is created."
        },
        "postfix": {
          "type": "string",
          "description": "Postfix for the database api key, this represents the last bytes of the key.\nThis is a read-only field and will be available after a database api key is created."
        },
        "key": {
          "type": "string",
          "description": "The key for the database api key.\nThis is a read-only field and will be available only once in the response of CreateDatabaseApiKey.\nYou should securely store this key and it should be handled as a secret."
        }
      },
      "description": "A DatabaseApiKey represents one database api key of a Qdrant cloud account.\nThis database key can grant access to one or more Qdrant databases (clusters)."
    },
    "authv3DatabaseApiKeyServiceCreateDatabaseApiKeyBody": {
      "type": "object",
      "properties": {
        "databaseApiKey": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string",
              "description": "Unique identifier for the database api key (in Guid format).\nThis is a read-only field and will be available after a database api key is created."
            },
            "createdAt": {
              "type": "string",
              "format": "date-time",
              "description": "Timestamp when the database api key was created.\nThis is a read-only field and will be available after a database api key is created."
            },
            "clusterId": {
              "type": "string",
              "description": "The identifier of the cluster (in Guid format).\nThis is a required field."
            },
            "name": {
              "type": "string",
              "description": "Name of the database api key.\nThis is a required field.\nName can only contain letters, numbers, spaces, underscores and dashes."
            },
            "expirationTime": {
              "type": "string",
              "format": "date-time",
              "description": "The expiration time of the database api key. The key will be invalid after this time.\nThis field is optional, and if not provided, the key does not expire."
            },
            "accessRules": {
              "type": "array",
              "items": {
                "type": "object",
                "$ref": "#/definitions/v3AccessRule"
              },
              "description": "A list of rules to grant access to the Qdrant database or to specific\ncollections. If no access rules are provided, global access to the database\nwith manage permissions is assumed. The list can contain a maximum of 20\naccess rules."
            },
            "createdByEmail": {
              "type": "string",
              "description": "The email of the user who created the database api key.\nThis is a read-only field and will be available after a database api key is created."
            },
            "postfix": {
              "type": "string",
              "description": "Postfix for the database api key, this represents the last bytes of the key.\nThis is a read-only field and will be available after a database api key is created."
            },
            "key": {
              "type": "string",
              "description": "The key for the database api key.\nThis is a read-only field and will be available only once in the response of CreateDatabaseApiKey.\nYou should securely store this key and it should be handled as a secret."
            }
          },
          "description": "The actual database api key.",
          "title": "The actual database api key."
        }
      },
      "description": "CreateDatabaseApiKeyRequest is the request for the CreateDatabaseApiKey function."
    },
    "authv3DeleteDatabaseApiKeyResponse": {
      "type": "object",
      "description": "DeleteDatabaseApiKeyResponse is the response from the DeleteDatabaseApiKey function.\n\nEmpty"
    },
    "authv3ListDatabaseApiKeysResponse": {
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/authv3DatabaseApiKey"
          },
          "description": "The actual database api keys in this list."
        }
      },
      "description": "ListDatabaseApiKeysResponse is the response from the ListDatabaseApiKeys function."
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v3AccessRule": {
      "type": "object",
      "properties": {
        "globalAccess": {
          "$ref": "#/definitions/v3GlobalAccessRule",
          "description": "A rule granting global access to the entire database.\nOnly one of the fields (global_access or collection_access) should be set in a single rule."
        },
        "collectionAccess": {
          "$ref": "#/definitions/v3CollectionAccessRule",
          "description": "A rule granting access to a specific collection in the database.\nOnly one of the fields (global_access or collection_access) should be set in a single rule."
        }
      },
      "description": "Represents an access rule. An access rule can either define global access to\nthe database or access to a specific collection."
    },
    "v3CollectionAccessRule": {
      "type": "object",
      "properties": {
        "collectionName": {
          "type": "string",
          "description": "The name of the collection.\nThis is a required field."
        },
        "accessType": {
          "type": "string",
          "description": "The type of access granted for the collection.\n\"read\" allows read-only access, while \"read-write\" allows both read and write access.\nThis is a required field."
        },
        "payload": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "An optional payload containing key-value pairs."
        }
      },
      "description": "Represents an access rule for a specific collection in the database."
    },
    "v3GlobalAccessRule": {
      "type": "object",
      "properties": {
        "accessType": {
          "type": "string",
          "description": "The type of access granted at the global level.\n\"read\" allows read-only access to the database, while \"manage\" allows read and write access.\nThis is a required field."
        }
      },
      "description": "Represents a global access rule that grants access to the entire database."
    }
  }
}
